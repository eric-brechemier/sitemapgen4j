<html><head><title>How to use SitemapGen4j</title></head>
<body>
<h1>How to use SitemapGen4j</h1>

SitemapGen4j is a tool to generate XML sitemaps in Java.

<h2>What's an XML sitemap?</h2>

Quoting from <a href="http://sitemaps.org/index.php">sitemaps.org</a>:

<blockquote><p>Sitemaps are an easy way for webmasters to inform search engines about pages on their sites that are available for crawling. In its simplest form, a Sitemap is an XML file that lists URLs for a site along with additional metadata about each URL (when it was last updated, how often it usually changes, and how important it is, relative to other URLs in the site) so that search engines can more intelligently crawl the site.</p>

<p>Web crawlers usually discover pages from links within the site and from other sites. Sitemaps supplement this data to allow crawlers that support Sitemaps to pick up all URLs in the Sitemap and learn about those URLs using the associated metadata. Using the Sitemap protocol does not guarantee that web pages are included in search engines, but provides hints for web crawlers to do a better job of crawling your site.</p>

<p>Sitemap 0.90 is offered under the terms of the Attribution-ShareAlike Creative Commons License and has wide adoption, including support from Google, Yahoo!, and Microsoft.</p>
</blockquote>

<h2>Getting started</h2>

<p>The easiest way to get started is to just use the WebSitemapGenerator class, like this:
<blockquote><code>WebSitemapGenerator wsg = new WebSitemapGenerator("http://www.example.com", new File(".");<br>
wsg.addUrl("http://www.example.com/index.html"); // repeat multiple times<br>
wsg.write();</code></blockquote>

<h2>Configuring options</h2>

But there are a lot of nifty options available for URLs and for the generator as a whole.  To configure the generator, use a builder:
<blockquote><code>WebSitemapGenerator wsg = <b>WebSitemapGenerator.builder</b>("http://www.example.com", new File(".")<br>
&nbsp;&nbsp;<b>.gzip(true).build()</b>;<br>
wsg.addUrl("http://www.example.com/index.html"); // repeat multiple times<br>
wsg.write();</code></blockquote>

To configure the URLs, construct a real WebSitemapUrl with WebSitemapUrl.Options.
<blockquote><code>WebSitemapGenerator wsg = new WebSitemapGenerator("http://www.example.com", new File(".");<br>
WebSitemapUrl url = <b>WebSitemapUrl.Options</b>("http://www.example.com/index.html")<br>
&nbsp;&nbsp;<b>.lastMod(new Date()).priority(1.0).changeFreq(ChangeFreq.HOURLY).build()</b>;<br>
wsg.addUrl(url); // repeat multiple times<br>
wsg.write();</code></blockquote>

<h2>Configuring the date format</h2>

One important configuration option for the sitemap generator is the date format.  W3C allows you to use up to six
different date patterns in sitemaps; if you don't specify one, we'll try to guess which one you want, and we'll use
the default timezone of the local machine, which might not be what you prefer.

<blockquote><code><b>W3CDateFormat dateFormat = new W3CDateFormat(Pattern.DAY);<br>
dateFormat.setTimeZone(TimeTimeZone.getTimeZone("GMT"));</b>
WebSitemapGenerator wsg = <b>WebSitemapGenerator.builder</b>("http://www.example.com", new File(".")<br>
&nbsp;&nbsp;<b>.dateFormat(dateFormat).build()</b>;<br>
wsg.addUrl("http://www.example.com/index.html"); // repeat multiple times<br>
wsg.write();</code></blockquote>

<h2>Lots of URLs: a sitemap index file</h2>

One sitemap can contain a maximum of 50,000 URLs.  (Some sitemaps, like Google News sitemaps, can contain only 1,000 URLs.)
If you need to put more URLs than that in a sitemap, you'll have to use a sitemap index file.  Fortunately, 
WebSitemapGenerator can manage the whole thing for you.

<blockquote><code>WebSitemapGenerator wsg = new WebSitemapGenerator("http://www.example.com", new File(".");<br>
for (int i = 0; i < 100000; i++) wsg.addUrl("http://www.example.com/index"+i+".html");<br>
wsg.write();<br>
<b>wsg.writeSitemapsWithIndex();</b></code></blockquote>

<p>That will generate two sitemaps, sitemap1.xml and sitemap2.xml, and then generate a sitemap_index.xml file describing the two.</p>

<p>It's also possible to carefully organize your sub-sitemaps.  For example, it's recommended to group URLs with the same changeFreq together
(have one sitemap for changeFreq "daily" and another for changeFreq "yearly"), so you can modify the lastMod of the daily
sitemap without modifying the lastMod of the yearly sitemap.  To do that, just construct your sitemaps one at a time using 
the WebSitemapGenerator, then use the SitemapIndexGenerator to create a single index for all of them.</p>

<blockquote><code>SitemapIndexGenerator sig = new SitemapIndexGenerator("http://www.example.com", new File("sitemap_index.xml");<br>
for (int i = 0; i < 5; i++) sig.addUrl("http://www.example.com/sitemap"+i+".html", new Date(i));<br>
wsg.write();<br>
</code></blockquote>

<h2>Validate your sitemaps</h2>

SitemapGen4j can also validate your sitemaps.  (If you used SitemapGen4j to make the sitemaps, you shouldn't need to
do this unless there's a bug in our code.)  It's easy to configure the WebSitemapGenerator to automatically validate
your sitemaps right after you write them (but this does slow things down, naturally).

<blockquote><code>WebSitemapGenerator wsg = <b>WebSitemapGenerator.builder</b>("http://www.example.com", new File(".")<br>
&nbsp;&nbsp;<b>.autoValidate(true).build()</b>;<br>
wsg.addUrl("http://www.example.com/index.html"); // repeat multiple times<br>
wsg.write();</code></blockquote>

You can also use the SitemapValidator directly to manage sitemaps.  It has two methods: validateWebSitemap(File f)
and validateSitemapIndex(File f).

<h2>Google-specific sitemaps</h2>

<p>Google can understand a wide variety of custom sitemap formats that they made up, including a Mobile sitemaps, Geo
sitemaps, Code sitemaps (for Google Code search), Google News sitemaps, and Video sitemaps.  SitemapGen4j can
generate any/all of these different types of sitemaps.</p>

<p>To generate a special type of sitemap, just use GoogleMobileSitemapGenerator, GoogleGeoSitemapGenerator,
GoogleCodeSitemapGenerator, GoogleCodeSitemapGenerator, GoogleNewsSitemapGenerator, or GoogleVideoSitemapGenerator
instead of WebSitemapGenerator.</p>

<p>You can't mix-and-match regular URLs with Google-specific sitemaps, so you'll also have to use a
GoogleMobileSitemapUrl, GoogleGeoSitemapUrl, GoogleCodeSitemapUrl, GoogleNewsSitemapUrl, or GoogleVideoSitemapUrl
instead of a WebSitemapUrl.  Each of them has unique configurable options not available to regular web URLs.</p> 

</body>
</html>